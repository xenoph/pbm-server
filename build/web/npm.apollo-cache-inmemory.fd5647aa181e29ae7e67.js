/*! For license information please see npm.apollo-cache-inmemory.fd5647aa181e29ae7e67.js.LICENSE.txt */
(self.webpackChunkpbm=self.webpackChunkpbm||[]).push([[270],{3330:(t,e,r)=>{"use strict";r.d(e,{h4:()=>nt});var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var o=function(){return(o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},a=r(2644),s=r(7637),c=r(2152),u=null,l={},f=1,h="@wry/context:Slot",p=Array,d=p[h]||function(){var t=function(){function t(){this.id=["slot",f++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var t=u;t;t=t.parent)if(this.id in t.slots){var e=t.slots[this.id];if(e===l)break;return t!==u&&(u.slots[this.id]=e),!0}return u&&(u.slots[this.id]=l),!1},t.prototype.getValue=function(){if(this.hasValue())return u.slots[this.id]},t.prototype.withValue=function(t,e,r,n){var i,o=((i={__proto__:null})[this.id]=t,i),a=u;u={parent:a,slots:o};try{return e.apply(n,r)}finally{u=a}},t.bind=function(t){var e=u;return function(){var r=u;try{return u=e,t.apply(this,arguments)}finally{u=r}}},t.noContext=function(t,e,r){if(!u)return t.apply(r,e);var n=u;try{return u=null,t.apply(r,e)}finally{u=n}},t}();try{Object.defineProperty(p,h,{value:p[h]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}();function y(){}d.bind,d.noContext;var v=function(){function t(t,e){void 0===t&&(t=1/0),void 0===e&&(e=y),this.max=t,this.dispose=e,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(t){return this.map.has(t)},t.prototype.get=function(t){var e=this.getEntry(t);return e&&e.value},t.prototype.getEntry=function(t){var e=this.map.get(t);if(e&&e!==this.newest){var r=e.older,n=e.newer;n&&(n.older=r),r&&(r.newer=n),e.older=this.newest,e.older.newer=e,e.newer=null,this.newest=e,e===this.oldest&&(this.oldest=n)}return e},t.prototype.set=function(t,e){var r=this.getEntry(t);return r?r.value=e:(r={key:t,value:e,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(t,r),r.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(t){var e=this.map.get(t);return!!e&&(e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.map.delete(t),this.dispose(e.value,t),!0)},t}(),m=new d,g=[],b=[];function w(t,e){if(!t)throw new Error(e||"assertion failure")}function S(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}var x=function(){function t(e,r){this.fn=e,this.args=r,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(w(!this.recomputing,"already recomputing"),function(t){var e=m.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),R(t)?k(e,t):C(e,t),e}(this)||!I(this))return R(this)?(e=M(t=this),m.withValue(t,O,[t]),function(t){if("function"==typeof t.subscribe)try{D(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(e){return t.setDirty(),!1}return!0}(t)&&function(t){t.dirty=!1,R(t)||j(t)}(t),e.forEach(I),S(t.value)):S(this.value);var t,e},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,V(this),D(this))},t.prototype.dispose=function(){var t=this;M(this).forEach(I),D(this),this.parents.forEach((function(e){e.setDirty(),E(e,t)}))},t.count=0,t}();function O(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(e){t.value[1]=e}t.recomputing=!1}function R(t){return t.dirty||!(!t.dirtyChildren||!t.dirtyChildren.size)}function V(t){t.parents.forEach((function(e){return k(e,t)}))}function j(t){t.parents.forEach((function(e){return C(e,t)}))}function k(t,e){if(w(t.childValues.has(e)),w(R(e)),t.dirtyChildren){if(t.dirtyChildren.has(e))return}else t.dirtyChildren=b.pop()||new Set;t.dirtyChildren.add(e),V(t)}function C(t,e){w(t.childValues.has(e)),w(!R(e));var r,n,i,o=t.childValues.get(e);0===o.length?t.childValues.set(e,e.value.slice(0)):(r=o,n=e.value,(i=r.length)>0&&i===n.length&&r[i-1]===n[i-1]||t.setDirty()),_(t,e),R(t)||j(t)}function _(t,e){var r=t.dirtyChildren;r&&(r.delete(e),0===r.size&&(b.length<100&&b.push(r),t.dirtyChildren=null))}function I(t){return 0===t.parents.size&&"function"==typeof t.reportOrphan&&!0===t.reportOrphan()}function M(t){var e=g;return t.childValues.size>0&&(e=[],t.childValues.forEach((function(r,n){E(t,n),e.push(n)}))),w(null===t.dirtyChildren),e}function E(t,e){e.parents.delete(t),t.childValues.delete(e),_(t,e)}function D(t){var e=t.unsubscribe;"function"==typeof e&&(t.unsubscribe=void 0,e())}var F=function(){function t(t){this.weakness=t}return t.prototype.lookup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.lookupArray(t)},t.prototype.lookupArray=function(t){var e=this;return t.forEach((function(t){return e=e.getChildTrie(t)})),e.data||(e.data=Object.create(null))},t.prototype.getChildTrie=function(e){var r=this.weakness&&function(t){switch(typeof t){case"object":if(null===t)break;case"function":return!0}return!1}(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=r.get(e);return n||r.set(e,n=new t(this.weakness)),n},t}(),T=new F("function"==typeof WeakMap);function A(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return T.lookupArray(t)}var Q=new Set;function q(t,e){void 0===e&&(e=Object.create(null));var r=new v(e.max||Math.pow(2,16),(function(t){return t.dispose()})),n=!!e.disposable,i=e.makeCacheKey||A;function o(){if(!n||m.hasValue()){var o=i.apply(null,arguments);if(void 0===o)return t.apply(null,arguments);var a=Array.prototype.slice.call(arguments),s=r.get(o);s?s.args=a:(s=new x(t,a),r.set(o,s),s.subscribe=e.subscribe,n&&(s.reportOrphan=function(){return r.delete(o)}));var c=s.recompute();return r.set(o,s),Q.add(r),m.hasValue()||(Q.forEach((function(t){return t.clean()})),Q.clear()),n?void 0:c}}return o.dirty=function(){var t=i.apply(null,arguments),e=void 0!==t&&r.get(t);e&&e.setDirty()},o}var W=r(1467),z=!1;var K=function(){function t(){}return t.prototype.ensureReady=function(){return Promise.resolve()},t.prototype.canBypassInit=function(){return!0},t.prototype.match=function(t,e,r){var n=r.store.get(t.id),i="ROOT_QUERY"===t.id;if(!n)return i;var o=n.__typename,a=void 0===o?i&&"Query":o;return a&&a===e||(!z,(0,s.Y8)()||(z=!0),"heuristic")},t}(),P=(function(){function t(t){t&&t.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(t.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}t.prototype.match=function(t,e,r){(0,W.kG)(this.isReady,1);var n=r.store.get(t.id),i="ROOT_QUERY"===t.id;if(!n)return i;var o=n.__typename,a=void 0===o?i&&"Query":o;if((0,W.kG)(a,2),a===e)return!0;var s=this.possibleTypesMap[e];return!!(a&&s&&s.indexOf(a)>-1)},t.prototype.parseIntrospectionResult=function(t){var e={};return t.__schema.types.forEach((function(t){"UNION"!==t.kind&&"INTERFACE"!==t.kind||(e[t.name]=t.possibleTypes.map((function(t){return t.name})))})),e}}(),Object.prototype.hasOwnProperty),B=function(){function t(t){var e=this;void 0===t&&(t=Object.create(null)),this.data=t,this.depend=q((function(t){return e.data[t]}),{disposable:!0,makeCacheKey:function(t){return t}})}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(t){return this.depend(t),this.data[t]},t.prototype.set=function(t,e){e!==this.data[t]&&(this.data[t]=e,this.depend.dirty(t))},t.prototype.delete=function(t){P.call(this.data,t)&&(delete this.data[t],this.depend.dirty(t))},t.prototype.clear=function(){this.replace(null)},t.prototype.replace=function(t){var e=this;t?(Object.keys(t).forEach((function(r){e.set(r,t[r])})),Object.keys(this.data).forEach((function(r){P.call(t,r)||e.delete(r)}))):Object.keys(this.data).forEach((function(t){e.delete(t)}))},t}();function N(t){return new B(t)}var U=function(){function t(t){var e=this,r=void 0===t?{}:t,n=r.cacheKeyRoot,i=void 0===n?new F(s.mr):n,o=r.freezeResults,a=void 0!==o&&o,c=this,u=c.executeStoreQuery,l=c.executeSelectionSet,f=c.executeSubSelectedArray;this.freezeResults=a,this.executeStoreQuery=q((function(t){return u.call(e,t)}),{makeCacheKey:function(t){var e=t.query,r=t.rootValue,n=t.contextValue,o=t.variableValues,a=t.fragmentMatcher;if(n.store instanceof B)return i.lookup(n.store,e,a,JSON.stringify(o),r.id)}}),this.executeSelectionSet=q((function(t){return l.call(e,t)}),{makeCacheKey:function(t){var e=t.selectionSet,r=t.rootValue,n=t.execContext;if(n.contextValue.store instanceof B)return i.lookup(n.contextValue.store,e,n.fragmentMatcher,JSON.stringify(n.variableValues),r.id)}}),this.executeSubSelectedArray=q((function(t){return f.call(e,t)}),{makeCacheKey:function(t){var e=t.field,r=t.array,n=t.execContext;if(n.contextValue.store instanceof B)return i.lookup(n.contextValue.store,e,r,JSON.stringify(n.variableValues))}})}return t.prototype.readQueryFromStore=function(t){return this.diffQueryAgainstStore(o(o({},t),{returnPartialData:!1})).result},t.prototype.diffQueryAgainstStore=function(t){var e=t.store,r=t.query,n=t.variables,i=t.previousResult,o=t.returnPartialData,a=void 0===o||o,u=t.rootId,l=void 0===u?"ROOT_QUERY":u,f=t.fragmentMatcherFunction,h=t.config,p=(0,s.iW)(r);n=(0,s.f0)({},(0,s.O4)(p),n);var d={store:e,dataIdFromObject:h&&h.dataIdFromObject,cacheRedirects:h&&h.cacheRedirects||{}},y=this.executeStoreQuery({query:r,rootValue:{type:"id",id:l,generated:!0,typename:"Query"},contextValue:d,variableValues:n,fragmentMatcher:f}),v=y.missing&&y.missing.length>0;return v&&!a&&y.missing.forEach((function(t){if(!t.tolerable)throw new W.ej(8)})),i&&(0,c.D)(i,y.result)&&(y.result=i),{result:y.result,complete:!v}},t.prototype.executeStoreQuery=function(t){var e=t.query,r=t.rootValue,n=t.contextValue,i=t.variableValues,o=t.fragmentMatcher,a=void 0===o?Y:o,c=(0,s.p$)(e),u=(0,s.kU)(e),l={query:e,fragmentMap:(0,s.F)(u),contextValue:n,variableValues:i,fragmentMatcher:a};return this.executeSelectionSet({selectionSet:c.selectionSet,rootValue:r,execContext:l})},t.prototype.executeSelectionSet=function(t){var e=this,r=t.selectionSet,n=t.rootValue,i=t.execContext,a=i.fragmentMap,c=i.contextValue,u=i.variableValues,l={result:null},f=[],h=c.store.get(n.id),p=h&&h.__typename||"ROOT_QUERY"===n.id&&"Query"||void 0;function d(t){var e;return t.missing&&(l.missing=l.missing||[],(e=l.missing).push.apply(e,t.missing)),t.result}return r.selections.forEach((function(t){var r;if((0,s.LZ)(t,u))if((0,s.My)(t)){var l=d(e.executeField(h,p,t,i));void 0!==l&&f.push(((r={})[(0,s.u2)(t)]=l,r))}else{var y=void 0;if((0,s.Ao)(t))y=t;else if(!(y=a[t.name.value]))throw new W.ej(9);var v=y.typeCondition&&y.typeCondition.name.value,m=!v||i.fragmentMatcher(n,v,c);if(m){var g=e.executeSelectionSet({selectionSet:y.selectionSet,rootValue:n,execContext:i});"heuristic"===m&&g.missing&&(g=o(o({},g),{missing:g.missing.map((function(t){return o(o({},t),{tolerable:!0})}))})),f.push(d(g))}}})),l.result=(0,s.bw)(f),this.freezeResults,l},t.prototype.executeField=function(t,e,r,n){var i=n.variableValues,o=n.contextValue,a=function(t,e,r,n,i,o){var a=o.directives,c=r;(n||a)&&(c=(0,s.PT)(c,n,a));var u=void 0;if(t&&void 0===(u=t[c])&&i.cacheRedirects&&"string"==typeof e){var l=i.cacheRedirects[e];if(l){var f=l[r];f&&(u=f(t,n,{getCacheKey:function(t){var e=i.dataIdFromObject(t);return e&&(0,s.aX)({id:e,typename:t.__typename})}}))}}return void 0===u?{result:u,missing:[{object:t,fieldName:c,tolerable:!1}]}:((0,s.v4)(u)&&(u=u.json),{result:u})}(t,e,r.name.value,(0,s.NC)(r,i),o,{resultKey:(0,s.u2)(r),directives:(0,s.Qy)(r,i)});return Array.isArray(a.result)?this.combineExecResults(a,this.executeSubSelectedArray({field:r,array:a.result,execContext:n})):r.selectionSet?null==a.result?a:this.combineExecResults(a,this.executeSelectionSet({selectionSet:r.selectionSet,rootValue:a.result,execContext:n})):(G(r,a.result),this.freezeResults,a)},t.prototype.combineExecResults=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.forEach((function(e){e.missing&&(t=t||[]).push.apply(t,e.missing)})),{result:e.pop().result,missing:t}},t.prototype.executeSubSelectedArray=function(t){var e,r=this,n=t.field,i=t.array,o=t.execContext;function a(t){return t.missing&&(e=e||[]).push.apply(e,t.missing),t.result}return i=i.map((function(t){return null===t?null:Array.isArray(t)?a(r.executeSubSelectedArray({field:n,array:t,execContext:o})):n.selectionSet?a(r.executeSelectionSet({selectionSet:n.selectionSet,rootValue:t,execContext:o})):(G(n,t),t)})),this.freezeResults,{result:i,missing:e}},t}();function G(t,e){if(!t.selectionSet&&(0,s.cQ)(e))throw new W.ej(10)}function Y(){return!0}var J=function(){function t(t){void 0===t&&(t=Object.create(null)),this.data=t}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(t){return this.data[t]},t.prototype.set=function(t,e){this.data[t]=e},t.prototype.delete=function(t){this.data[t]=void 0},t.prototype.clear=function(){this.data=Object.create(null)},t.prototype.replace=function(t){this.data=t||Object.create(null)},t}(),X=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="WriteError",e}return i(e,t),e}(Error),$=function(){function t(){}return t.prototype.writeQueryToStore=function(t){var e=t.query,r=t.result,n=t.store,i=void 0===n?N():n,o=t.variables,a=t.dataIdFromObject,s=t.fragmentMatcherFunction;return this.writeResultToStore({dataId:"ROOT_QUERY",result:r,document:e,store:i,variables:o,dataIdFromObject:a,fragmentMatcherFunction:s})},t.prototype.writeResultToStore=function(t){var e=t.dataId,r=t.result,n=t.document,i=t.store,o=void 0===i?N():i,a=t.variables,c=t.dataIdFromObject,u=t.fragmentMatcherFunction,l=(0,s.$H)(n);try{return this.writeSelectionSetToStore({result:r,dataId:e,selectionSet:l.selectionSet,context:{store:o,processedData:{},variables:(0,s.f0)({},(0,s.O4)(l),a),dataIdFromObject:c,fragmentMap:(0,s.F)((0,s.kU)(n)),fragmentMatcherFunction:u}})}catch(t){throw function(t,e){var r=new X("Error writing result to store for query:\n "+JSON.stringify(e));return r.message+="\n"+t.message,r.stack=t.stack,r}(t,n)}},t.prototype.writeSelectionSetToStore=function(t){var e=this,r=t.result,n=t.dataId,i=t.selectionSet,o=t.context,a=o.variables,c=o.store,u=o.fragmentMap;return i.selections.forEach((function(t){var i;if((0,s.LZ)(t,a))if((0,s.My)(t)){var c=(0,s.u2)(t),l=r[c];if(void 0!==l)e.writeFieldToStore({dataId:n,value:l,field:t,context:o});else{var f=!1,h=!1;t.directives&&t.directives.length&&(f=t.directives.some((function(t){return t.name&&"defer"===t.name.value})),h=t.directives.some((function(t){return t.name&&"client"===t.name.value}))),!f&&!h&&o.fragmentMatcherFunction}}else{var p=void 0;(0,s.Ao)(t)?p=t:(p=(u||{})[t.name.value],(0,W.kG)(p,3));var d=!0;if(o.fragmentMatcherFunction&&p.typeCondition){var y=n||"self",v=(0,s.aX)({id:y,typename:void 0}),m={store:new J((i={},i[y]=r,i)),cacheRedirects:{}},g=o.fragmentMatcherFunction(v,p.typeCondition.name.value,m);(0,s.yv)(),d=!!g}d&&e.writeSelectionSetToStore({result:r,selectionSet:p.selectionSet,dataId:n,context:o})}})),c},t.prototype.writeFieldToStore=function(t){var e,r,n,i=t.field,a=t.value,u=t.dataId,l=t.context,f=l.variables,h=l.dataIdFromObject,p=l.store,d=(0,s.vf)(i,f);if(i.selectionSet&&null!==a)if(Array.isArray(a)){var y=u+"."+d;r=this.processArrayValue(a,y,i.selectionSet,l)}else{var v=u+"."+d,m=!0;if(L(v)||(v="$"+v),h){var g=h(a);(0,W.kG)(!g||!L(g),4),(g||"number"==typeof g&&0===g)&&(v=g,m=!1)}H(v,i,l.processedData)||this.writeSelectionSetToStore({dataId:v,result:a,selectionSet:i.selectionSet,context:l});var b=a.__typename;r=(0,s.aX)({id:v,typename:b},m);var w=(n=p.get(u))&&n[d];if(w!==r&&(0,s.cQ)(w)){var S=void 0!==w.typename,x=void 0!==b,O=S&&x&&w.typename!==b;(0,W.kG)(!m||w.generated||O,5),(0,W.kG)(!S||x,6),w.generated&&(O?m||p.delete(w.id):Z(w.id,r.id,p))}}else r=null!=a&&"object"==typeof a?{type:"json",json:a}:a;(n=p.get(u))&&(0,c.D)(r,n[d])||p.set(u,o(o({},n),((e={})[d]=r,e)))},t.prototype.processArrayValue=function(t,e,r,n){var i=this;return t.map((function(t,o){if(null===t)return null;var a=e+"."+o;if(Array.isArray(t))return i.processArrayValue(t,a,r,n);var c=!0;if(n.dataIdFromObject){var u=n.dataIdFromObject(t);u&&(a=u,c=!1)}return H(a,r,n.processedData)||i.writeSelectionSetToStore({dataId:a,result:t,selectionSet:r,context:n}),(0,s.aX)({id:a,typename:t.__typename},c)}))},t}();function L(t){return"$"===t[0]}function Z(t,e,r){if(t===e)return!1;var n=r.get(t),i=r.get(e),a=!1;Object.keys(n).forEach((function(t){var e=n[t],o=i[t];(0,s.cQ)(e)&&L(e.id)&&(0,s.cQ)(o)&&!(0,c.D)(e,o)&&Z(e.id,o.id,r)&&(a=!0)})),r.delete(t);var u=o(o({},n),i);return(0,c.D)(u,i)?a:(r.set(e,u),!0)}function H(t,e,r){if(!r)return!1;if(r[t]){if(r[t].indexOf(e)>=0)return!0;r[t].push(e)}else r[t]=[e];return!1}var tt={fragmentMatcher:new K,dataIdFromObject:function(t){if(t.__typename){if(void 0!==t.id)return t.__typename+":"+t.id;if(void 0!==t._id)return t.__typename+":"+t._id}return null},addTypename:!0,resultCaching:!0,freezeResults:!1},et=Object.prototype.hasOwnProperty,rt=function(t){function e(e,r,n){var i=t.call(this,Object.create(null))||this;return i.optimisticId=e,i.parent=r,i.transaction=n,i}return i(e,t),e.prototype.toObject=function(){return o(o({},this.parent.toObject()),this.data)},e.prototype.get=function(t){return et.call(this.data,t)?this.data[t]:this.parent.get(t)},e}(J),nt=function(t){function e(e){void 0===e&&(e={});var r=t.call(this)||this;r.watches=new Set,r.typenameDocumentCache=new Map,r.cacheKeyRoot=new F(s.mr),r.silenceBroadcast=!1,r.config=o(o({},tt),e),r.config.customResolvers&&(r.config.cacheRedirects=r.config.customResolvers),r.config.cacheResolvers&&(r.config.cacheRedirects=r.config.cacheResolvers),r.addTypename=!!r.config.addTypename,r.data=r.config.resultCaching?new B:new J,r.optimisticData=r.data,r.storeWriter=new $,r.storeReader=new U({cacheKeyRoot:r.cacheKeyRoot,freezeResults:e.freezeResults});var n=r,i=n.maybeBroadcastWatch;return r.maybeBroadcastWatch=q((function(t){return i.call(r,t)}),{makeCacheKey:function(t){if(!t.optimistic&&!t.previousResult)return n.data instanceof B?n.cacheKeyRoot.lookup(t.query,JSON.stringify(t.variables)):void 0}}),r}return i(e,t),e.prototype.restore=function(t){return t&&this.data.replace(t),this},e.prototype.extract=function(t){return void 0===t&&(t=!1),(t?this.optimisticData:this.data).toObject()},e.prototype.read=function(t){if("string"==typeof t.rootId&&void 0===this.data.get(t.rootId))return null;var e=this.config.fragmentMatcher,r=e&&e.match;return this.storeReader.readQueryFromStore({store:t.optimistic?this.optimisticData:this.data,query:this.transformDocument(t.query),variables:t.variables,rootId:t.rootId,fragmentMatcherFunction:r,previousResult:t.previousResult,config:this.config})||null},e.prototype.write=function(t){var e=this.config.fragmentMatcher,r=e&&e.match;this.storeWriter.writeResultToStore({dataId:t.dataId,result:t.result,variables:t.variables,document:this.transformDocument(t.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:r}),this.broadcastWatches()},e.prototype.diff=function(t){var e=this.config.fragmentMatcher,r=e&&e.match;return this.storeReader.diffQueryAgainstStore({store:t.optimistic?this.optimisticData:this.data,query:this.transformDocument(t.query),variables:t.variables,returnPartialData:t.returnPartialData,previousResult:t.previousResult,fragmentMatcherFunction:r,config:this.config})},e.prototype.watch=function(t){var e=this;return this.watches.add(t),function(){e.watches.delete(t)}},e.prototype.evict=function(t){throw new W.ej(7)},e.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){for(var e=[],r=0,n=this.optimisticData;n instanceof rt;)n.optimisticId===t?++r:e.push(n),n=n.parent;if(r>0){for(this.optimisticData=n;e.length>0;){var i=e.pop();this.performTransaction(i.transaction,i.optimisticId)}this.broadcastWatches()}},e.prototype.performTransaction=function(t,e){var r=this.data,n=this.silenceBroadcast;this.silenceBroadcast=!0,"string"==typeof e&&(this.data=this.optimisticData=new rt(e,this.optimisticData,t));try{t(this)}finally{this.silenceBroadcast=n,this.data=r}this.broadcastWatches()},e.prototype.recordOptimisticTransaction=function(t,e){return this.performTransaction(t,e)},e.prototype.transformDocument=function(t){if(this.addTypename){var e=this.typenameDocumentCache.get(t);return e||(e=(0,s.Gw)(t),this.typenameDocumentCache.set(t,e),this.typenameDocumentCache.set(e,e)),e}return t},e.prototype.broadcastWatches=function(){var t=this;this.silenceBroadcast||this.watches.forEach((function(e){return t.maybeBroadcastWatch(e)}))},e.prototype.maybeBroadcastWatch=function(t){t.callback(this.diff({query:t.query,variables:t.variables,previousResult:t.previousResult&&t.previousResult(),optimistic:t.optimistic}))},e}(a.R)}}]);
//# sourceMappingURL=npm.apollo-cache-inmemory.fd5647aa181e29ae7e67.js.map